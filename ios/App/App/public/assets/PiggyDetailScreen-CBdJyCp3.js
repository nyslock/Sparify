import{c as Ze,g as Le,j as e,X as $e,f as Je,r as i,S as Qe,h as Ne,i as ye,T as et,k as tt,a as ee,C as st}from"./index-O7DqwQ1U.js";import{C as p}from"./check-DAG_OLph.js";import{L as ae}from"./lock-TlPa6x-z.js";import{T as lt,P as at}from"./trending-up-DaIbUIWb.js";import{A as M,R as te,m as ke,X as Se,Y as Ce,T as se,n as ze,l as Ae,P as De,o as it,C as rt,p as Te}from"./AreaChart-BqjMXG9O.js";import{T as Ee,P as nt,a as ot,F as dt,G as Fe}from"./trophy-BHHW1_TB.js";/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ct=[["path",{d:"M2 20h.01",key:"4haj6o"}],["path",{d:"M7 20v-4",key:"j294jx"}],["path",{d:"M12 20v-8",key:"i3yub9"}],["path",{d:"M17 20V8",key:"1tkaf5"}],["path",{d:"M22 4v16",key:"sih9yq"}]],le=Ze("signal",ct),xt=({user:s,piggyBanks:g,onUpdateUser:P,onClose:S,language:G})=>{const j=Le(G),C=j.detail,R=j.shop,z=n=>{n.condition(s,g)&&!s.claimedAchievements.includes(n.id)&&P({...s,coins:s.coins+n.reward,claimedAchievements:[...s.claimedAchievements,n.id]})};return e.jsxs("div",{className:"fixed inset-0 z-[150] bg-slate-50 flex flex-col animate-in slide-in-from-bottom-10 duration-500",children:[e.jsxs("div",{className:"bg-white px-6 pt-12 pb-6 shadow-sm border-b border-slate-100 flex justify-between items-center z-10 sticky top-0 md:px-12 md:pt-10",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("button",{onClick:S,className:"w-12 h-12 bg-slate-50 rounded-2xl flex items-center justify-center text-slate-400 hover:text-slate-900 transition-colors",children:e.jsx($e,{size:24,strokeWidth:3})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-black text-slate-900 tracking-tight",children:C.achievements}),e.jsx("p",{className:"text-slate-400 font-bold text-xs uppercase tracking-wider",children:C.achievementsDesc})]})]}),e.jsxs("div",{className:"bg-yellow-400 text-yellow-950 px-4 py-2 rounded-2xl font-black shadow-md flex items-center gap-2",children:[e.jsx("div",{className:"w-5 h-5 rounded-full bg-yellow-100 border-2 border-yellow-950 flex items-center justify-center text-[10px]",children:"€"}),e.jsx("span",{className:"text-xl",children:s.coins})]})]}),e.jsx("div",{className:"flex-1 overflow-y-auto no-scrollbar p-6 pb-32 max-w-2xl mx-auto w-full",children:e.jsx("div",{className:"space-y-4",children:Je.map(n=>{const w=n.condition(s,g),x=s.claimedAchievements.includes(n.id),_=w&&!x;return e.jsxs("div",{className:`p-6 rounded-[2.5rem] border-2 transition-all relative overflow-hidden group ${x?"bg-slate-100 border-slate-200 opacity-80":w?"bg-white border-emerald-400 shadow-xl shadow-emerald-100":"bg-white border-slate-100 opacity-60"}`,children:[e.jsxs("div",{className:"flex items-center gap-5",children:[e.jsx("div",{className:`w-16 h-16 rounded-[1.5rem] flex items-center justify-center text-3xl shadow-sm transition-transform duration-500 group-hover:scale-110 ${x?"bg-slate-200":w?"bg-emerald-100":"bg-slate-100"}`,children:x?e.jsx(p,{className:"text-emerald-500",strokeWidth:4}):n.icon}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:`font-black text-xl ${x?"text-slate-500 line-through":"text-slate-900"}`,children:n.title}),e.jsx("p",{className:`text-sm font-bold ${x?"text-slate-400":"text-slate-500"}`,children:n.description})]})]}),e.jsxs("div",{className:"mt-6 flex justify-between items-center pt-4 border-t border-slate-100/50",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-6 h-6 rounded-full bg-yellow-400 flex items-center justify-center text-[10px] font-black text-yellow-900 shadow-sm",children:"€"}),e.jsxs("span",{className:"font-black text-slate-900",children:[n.reward," ",R.balance]})]}),x?e.jsxs("div",{className:"bg-slate-200 text-slate-500 font-black px-4 py-2 rounded-xl text-xs flex items-center gap-1",children:[e.jsx(p,{size:14,strokeWidth:3})," Abgeholt"]}):_?e.jsx("button",{onClick:()=>z(n),className:"bg-emerald-500 text-white font-black px-6 py-2.5 rounded-xl text-xs shadow-lg shadow-emerald-200 active:scale-95 animate-pulse transition-all hover:bg-emerald-600",children:"Belohnung abholen!"}):e.jsxs("div",{className:"flex items-center gap-1.5 text-slate-400 font-black text-xs",children:[e.jsx(ae,{size:14})," Gesperrt"]})]})]},n.id)})})})]})},Nt=({bank:s,user:g,piggyBanks:P,onBack:S,onUpdateBank:G,onTransaction:j,onDeleteBank:C,onDeleteGoal:R,onUpdateGoal:z,onAddGoal:n,onUpdateUser:w,language:x,appMode:_="kids"})=>{var we,ve;const[We,A]=i.useState(!1),[Me,D]=i.useState(!1),[Pe,I]=i.useState(!1),[Ge,ie]=i.useState(!1),[Re,B]=i.useState(!1),[T,O]=i.useState(!1),[K,re]=i.useState(!1),[b,ne]=i.useState("all"),[oe,_e]=i.useState(s.name),[V,Ie]=i.useState(s.glitterEnabled||!1),[U,Be]=i.useState(s.rainbowEnabled||!1),[H,Oe]=i.useState(s.safeLockEnabled||!1),[de,ce]=i.useState(""),[xe,me]=i.useState(""),[he,v]=i.useState(null),[c,ue]=i.useState(null),[X,q]=i.useState(""),[be,Y]=i.useState(""),[mt,Ke]=i.useState(!1),[h,E]=i.useState(null),[f,Z]=i.useState(!1),[N,fe]=i.useState(!1),[ht,Ve]=i.useState(null),[ut,Ue]=i.useState("0"),l=Le(x).detail,pe=Qe.filter(t=>t.category==="piggy"&&g.inventory.includes(t.id)),F=i.useMemo(()=>{const t=s.goals||[],a=s.balance;if(t.length===0)return[];const r=t.length,o=a/r;let d=t.map(k=>({...k,currentAmount:o,isFull:!1})),y=0,u=!0;for(;u&&y<20;){u=!1;let k=0,W=[];if(d.forEach((m,Q)=>{m.isFull||(m.currentAmount>=m.targetAmount-.001?(k+=Math.max(0,m.currentAmount-m.targetAmount),m.currentAmount=m.targetAmount,m.isFull=!0,u=!0):W.push(Q))}),k>.001&&W.length>0){const m=k/W.length;W.forEach(Q=>{d[Q].currentAmount+=m}),u=!0}y++}return d},[s.balance,s.goals]),L=t=>{Ke(!1),t?(ue(t),q(t.title),Y(t.targetAmount.toFixed(2).replace(".",","))):(ue(null),q(""),Y("")),I(!0)},He=async()=>{const t=de.replace(",","."),a=parseFloat(t),r=Number(s.balance);if(isNaN(a)||a<=0){v("Bitte gib einen gültigen Betrag ein.");return}if(a>r){v(l.errorNotEnough);return}O(!0),v(null);try{const o=xe.trim()||l.withdrawal,d=new Date().toLocaleDateString("de-DE",{day:"2-digit",month:"2-digit",year:"numeric"}),y={id:crypto.randomUUID(),title:o,amount:-a,date:d,type:"withdrawal"};await j(s.id,r-a,[y]),re(!0),setTimeout(()=>{D(!1),O(!1),re(!1),ce(""),me("")},1500)}catch{v("Fehler beim Verarbeiten. Bitte versuche es erneut."),O(!1)}},Xe=async()=>{const t=be.replace(",","."),a=parseFloat(t);if(!X||isNaN(a)||a<=0)return;const r={id:(c==null?void 0:c.id)||crypto.randomUUID(),title:X,targetAmount:a,savedAmount:(c==null?void 0:c.savedAmount)||0,allocationPercent:(c==null?void 0:c.allocationPercent)||0};c?z&&await z(s.id,r):n&&await n(s.id,r),I(!1)},qe=async()=>{if(!(!h||f)){if(s.balance<h.targetAmount){alert("Dein Guthaben reicht leider nicht aus, um diesen Wunsch zu erfüllen."),E(null);return}Z(!0);try{const t=h.targetAmount,a=s.balance-t,r=`Wunscheinlösung: ${h.title}`,o=new Date().toLocaleDateString("de-DE",{day:"2-digit",month:"2-digit",year:"numeric"}),d={id:crypto.randomUUID(),title:r,amount:-t,date:o,type:"withdrawal"};await R(s.id,h),await j(s.id,a,[d]),fe(!0),setTimeout(()=>{E(null),Z(!1),fe(!1)},2e3)}catch(t){console.error("Fehler beim Einlösen des Wunschs:",t),alert("Es gab einen Fehler. Bitte versuche es erneut."),Z(!1)}}},Ye=t=>{t==="effect_glitter"&&Ie(!V),t==="effect_rainbow"&&Be(!U),t==="effect_safe_lock"&&Oe(!H)},$=i.useMemo(()=>{const t=s.history||[];if(t.length===0)return[];const a=new Date;let r=new Date;return b==="week"?r.setDate(a.getDate()-7):b==="month"&&r.setMonth(a.getMonth()-1),t.filter(d=>{var u;return b==="all"?!0:new Date(((u=d.day)==null?void 0:u.split(".").reverse().join("-"))||a)>=r}).map(d=>({...d,amount:Math.max(0,d.amount)}))},[s.history,b]),J=i.useMemo(()=>{const t=s.goals||[];return t.length===0?[]:t.map(a=>({name:a.title,value:Math.max(0,a.targetAmount),id:a.id}))},[s.goals]),ge=["#ef4444","#f97316","#eab308","#22c55e","#3b82f6","#8b5cf6","#ec4899"];if(_==="adult")return e.jsxs("div",{className:"flex-1 flex flex-col h-screen bg-slate-100 overflow-hidden relative w-full items-center",children:[e.jsxs("div",{className:"p-4 sm:p-6 flex justify-between items-center z-50 w-full max-w-6xl",children:[e.jsx("button",{onClick:S,className:"w-10 h-10 bg-white shadow-md rounded-xl flex items-center justify-center text-slate-500 hover:text-slate-900 transition-all",children:e.jsx(Ne,{size:20,strokeWidth:2.5})}),e.jsx("h1",{className:"font-black text-slate-800 text-sm sm:text-lg uppercase tracking-widest truncate px-4",children:s.name}),e.jsx("button",{onClick:()=>A(!0),className:"w-10 h-10 bg-white shadow-md rounded-xl flex items-center justify-center text-slate-500 hover:text-slate-900 transition-all",children:e.jsx(ye,{size:20,strokeWidth:2.5})})]}),e.jsx("div",{className:"flex-1 overflow-y-auto no-scrollbar p-4 sm:p-6 pt-0 max-w-6xl mx-auto w-full pb-40",children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:`bg-white rounded-[2rem] p-5 sm:p-8 shadow-xl shadow-slate-200/50 border border-white flex flex-col items-center text-center gap-6 sm:gap-8 ${s.safeLockEnabled?"border-2 border-slate-900 shadow-slate-400":""}`,children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-slate-400 font-bold text-[10px] sm:text-xs uppercase tracking-widest mb-1",children:l.available}),e.jsxs("div",{className:"flex flex-col items-center gap-2",children:[e.jsxs("span",{className:"text-4xl sm:text-5xl md:text-6xl font-black text-slate-900 tracking-tighter flex items-center gap-2 sm:gap-3",children:[s.safeLockEnabled&&e.jsx(ae,{size:24,className:"text-slate-400 sm:w-8 sm:h-8"}),"€",s.balance.toLocaleString("de-DE",{minimumFractionDigits:2,maximumFractionDigits:2})]}),e.jsxs("span",{className:"text-emerald-500 font-bold flex items-center text-xs sm:text-sm bg-emerald-50 px-3 py-1 rounded-full",children:[e.jsx(lt,{size:14,className:"mr-1"})," Active"]})]})]}),e.jsxs("div",{className:"flex gap-3 sm:gap-4 w-full md:w-auto",children:[e.jsxs("button",{onClick:()=>D(!0),className:"flex-1 md:flex-none bg-slate-900 text-white font-bold py-3 sm:py-4 px-4 sm:px-8 rounded-2xl shadow-lg active:scale-95 transition-all flex items-center justify-center gap-2 text-sm sm:text-base",children:[e.jsx(M,{size:18,className:"sm:w-5 sm:h-5"})," ",l.payout]}),e.jsxs("button",{onClick:()=>L(),className:"flex-1 md:flex-none bg-white border-2 border-slate-100 text-slate-800 font-bold py-3 sm:py-4 px-4 sm:px-8 rounded-2xl shadow-sm hover:border-indigo-200 active:scale-95 transition-all flex items-center justify-center gap-2 text-sm sm:text-base",children:[e.jsx(Ee,{size:18,className:"text-indigo-500 sm:w-5 sm:h-5"})," ",l.newGoal]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"bg-white rounded-[2rem] p-5 sm:p-6 shadow-md border border-white",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("h3",{className:"font-bold text-slate-800 flex items-center gap-2",children:[e.jsx(le,{size:18,className:"text-indigo-500"})," ",l.history]}),e.jsx("div",{className:"flex gap-2",children:["week","month","all"].map(t=>e.jsx("button",{onClick:()=>ne(t),className:`px-3 py-1 text-xs font-bold rounded-lg transition-all ${b===t?"bg-indigo-500 text-white":"bg-slate-100 text-slate-600 hover:bg-slate-200"}`,children:t==="week"?"Woche":t==="month"?"Monat":"Alles"},t))})]}),e.jsx("div",{className:"h-[200px]",children:$.length>0?e.jsx(te,{width:"100%",height:"100%",children:e.jsxs(ke,{data:$,children:[e.jsx("defs",{children:e.jsxs("linearGradient",{id:"adultColor",x1:"0",y1:"0",x2:"0",y2:"1",children:[e.jsx("stop",{offset:"5%",stopColor:"#6366f1",stopOpacity:.1}),e.jsx("stop",{offset:"95%",stopColor:"#6366f1",stopOpacity:0})]})}),e.jsx(Se,{dataKey:"day",hide:!0}),e.jsx(Ce,{hide:!0,domain:[0,"auto"]}),e.jsx(se,{contentStyle:{borderRadius:"12px",border:"none",boxShadow:"0 4px 20px rgba(0,0,0,0.1)"},formatter:t=>[`€${t.toLocaleString("de-DE",{minimumFractionDigits:2,maximumFractionDigits:2})}`,"Equity"]}),e.jsx(ze,{type:"monotone",dataKey:"amount",stroke:"#6366f1",strokeWidth:3,fill:"url(#adultColor)"})]})}):e.jsx("div",{className:"flex items-center justify-center h-full text-slate-400",children:e.jsx("p",{children:"Keine Transaktionen vorhanden"})})})]}),e.jsxs("div",{className:"bg-white rounded-[2rem] p-5 sm:p-6 shadow-md border border-white",children:[e.jsx("div",{className:"flex items-center justify-between mb-6",children:e.jsxs("h3",{className:"font-bold text-slate-800 flex items-center gap-2",children:[e.jsx(nt,{size:18,className:"text-rose-500"})," ",l.share]})}),e.jsx("div",{className:"space-y-4",children:F.length===0?e.jsxs("div",{className:"text-center py-10",children:[e.jsx("p",{className:"text-slate-400 text-sm",children:l.noGoals}),e.jsxs("button",{onClick:()=>L(),className:"mt-4 text-indigo-500 font-bold text-sm",children:["+ ",l.newGoal]})]}):F.map(t=>e.jsxs("div",{onClick:()=>{Ve({goal:t}),Ue((t.allocationPercent||0).toString())},className:"p-4 rounded-2xl border border-slate-50 bg-slate-50/50 hover:bg-slate-50 cursor-pointer group transition-all",children:[e.jsxs("div",{className:"flex justify-between items-center mb-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("div",{className:"w-8 h-8 bg-white shadow-sm rounded-lg flex items-center justify-center text-slate-600 font-bold text-xs",children:[t.allocationPercent||0,"%"]}),e.jsx("span",{className:"font-bold text-slate-800 text-sm sm:text-base",children:t.title})]}),e.jsxs("span",{className:"text-[10px] sm:text-xs font-black text-slate-400",children:["€",t.currentAmount.toFixed(2)]})]}),e.jsx("div",{className:"w-full bg-white h-1.5 rounded-full overflow-hidden",children:e.jsx("div",{className:"h-full bg-indigo-500 rounded-full",style:{width:`${t.currentAmount/t.targetAmount*100}%`}})})]},t.id))})]})]}),e.jsxs("div",{className:"bg-white rounded-[2rem] p-5 sm:p-6 shadow-md border border-white",children:[e.jsxs("h3",{className:"font-bold text-slate-800 mb-6 flex items-center gap-2",children:[e.jsx(le,{size:18,className:"text-emerald-500"})," ",l.transactions]}),e.jsx("div",{className:"space-y-2",children:((we=s.transactions)==null?void 0:we.length)>0?s.transactions.map(t=>e.jsxs("div",{className:"flex items-center justify-between p-4 hover:bg-slate-50 rounded-2xl transition-colors border-b border-slate-50 last:border-0",children:[e.jsxs("div",{className:"flex items-center gap-3 sm:gap-4",children:[e.jsx("div",{className:`w-10 h-10 rounded-xl flex items-center justify-center ${t.type==="deposit"?"bg-emerald-50 text-emerald-600":"bg-rose-50 text-rose-600"}`,children:t.type==="deposit"?e.jsx(Ae,{size:20}):e.jsx(M,{size:20})}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-bold text-slate-800 text-sm line-clamp-2 leading-tight",children:t.title?t.title.length>30?t.title.slice(0,30)+"...":t.title:t.type==="deposit"?t.deposit:t.withdrawal}),e.jsx("p",{className:"text-slate-400 text-[10px] font-bold uppercase tracking-wider",children:t.date})]})]}),e.jsxs("span",{className:`font-black text-sm sm:text-base whitespace-nowrap shrink-0 ${t.type==="deposit"?"text-emerald-600":"text-slate-900"}`,children:[t.type==="deposit"?"+":"-","€",Math.abs(t.amount).toLocaleString("de-DE",{minimumFractionDigits:2,maximumFractionDigits:3})]})]},t.id)):e.jsx("p",{className:"text-slate-400 text-center py-10",children:l.noTransactions})})]})]})}),je()]});return e.jsxs("div",{className:"flex-1 flex flex-col h-screen relative bg-slate-50 md:flex-row md:overflow-hidden",children:[e.jsxs("div",{className:"absolute top-0 left-0 right-0 p-6 pt-16 md:pt-6 flex justify-between items-start z-50 pointer-events-none w-full",children:[e.jsx("button",{onClick:S,className:"pointer-events-auto w-12 h-12 bg-white/20 hover:bg-white/30 backdrop-blur-md rounded-2xl flex items-center justify-center text-white transition-all active:scale-95 shadow-lg ring-1 ring-white/30 md:bg-white md:text-slate-500 md:shadow-md md:hover:bg-slate-50 md:ring-0 md:fixed md:top-6 md:right-24 md:z-[60]",children:e.jsx(Ne,{size:24,strokeWidth:3})}),e.jsx("button",{onClick:()=>A(!0),className:"pointer-events-auto w-12 h-12 bg-white/20 hover:bg-white/30 backdrop-blur-md rounded-2xl flex items-center justify-center text-white transition-all active:scale-95 shadow-lg ring-1 ring-white/30 md:bg-white md:text-slate-500 md:shadow-md md:hover:bg-slate-50 md:ring-0 md:fixed md:top-6 md:right-6 md:z-[60]",children:e.jsx(ye,{size:24,strokeWidth:3})})]}),e.jsxs("div",{className:"flex-1 overflow-y-auto no-scrollbar p-6 flex flex-col md:flex-row gap-8 max-w-6xl mx-auto w-full",children:[e.jsxs("div",{className:"w-full md:w-1/2 md:flex md:flex-col md:gap-6",children:[e.jsxs("div",{id:"tutorial-piggy-balance",className:`relative ${s.rainbowEnabled?"animate-rainbow-bg":et[s.color]} rounded-b-[3.5rem] md:rounded-[2.5rem] pt-28 pb-12 px-6 shadow-2xl shadow-slate-300/50 z-10 transition-colors duration-500 overflow-hidden md:pt-12 md:flex-1 md:flex md:flex-col md:justify-center`,children:[s.glitterEnabled&&e.jsx("div",{className:"absolute inset-0 opacity-20 pointer-events-none mix-blend-overlay animate-glitter-bg z-0",style:{backgroundImage:"radial-gradient(circle at 50% 50%, white 1.5px, transparent 1.5px)",backgroundSize:"24px 24px"}}),e.jsx("div",{className:"absolute top-0 right-0 w-64 h-64 bg-white opacity-20 rounded-full blur-3xl -mr-20 -mt-20 pointer-events-none"}),e.jsx("div",{className:"absolute bottom-0 left-0 w-48 h-48 bg-black opacity-10 rounded-full blur-2xl -ml-10 -mb-10 pointer-events-none"}),e.jsxs("div",{className:"text-center relative z-10",children:[e.jsx("div",{className:"inline-block bg-black/10 backdrop-blur-md px-5 py-2 rounded-full mb-3 border border-white/20 shadow-sm",children:e.jsxs("h1",{className:"text-white text-xs font-black uppercase tracking-widest flex items-center gap-2",children:[e.jsx(at,{size:14})," ",s.name]})}),e.jsxs("h2",{className:`text-7xl md:text-8xl font-black text-white tracking-tighter drop-shadow-sm flex items-center justify-center gap-4 ${s.safeLockEnabled?"scale-90":""}`,children:[s.safeLockEnabled&&e.jsx(ae,{size:48,className:"opacity-80"}),"€",s.balance.toLocaleString("de-DE",{minimumFractionDigits:2,maximumFractionDigits:2})]}),e.jsx("p",{className:"text-white/80 font-bold mt-2 text-sm bg-black/5 inline-block px-3 py-1 rounded-lg",children:l.available})]})]}),e.jsxs("div",{className:"px-6 pt-10 md:pt-0 pb-6 grid grid-cols-3 gap-3 relative z-20",children:[e.jsxs("button",{onClick:()=>D(!0),className:"bg-white hover:bg-slate-50 active:scale-95 transition-all p-4 rounded-[2rem] shadow-xl shadow-slate-200/50 flex flex-col items-center justify-center gap-2 group border border-slate-100",children:[e.jsx("div",{className:"w-12 h-12 bg-amber-100 rounded-2xl flex items-center justify-center text-amber-500 group-hover:scale-110 transition-transform",children:e.jsx(M,{size:24,strokeWidth:2.5})}),e.jsx("span",{className:"font-black text-slate-800 text-[10px] uppercase tracking-wider",children:l.payout})]}),e.jsxs("button",{onClick:()=>L(),className:"bg-white hover:bg-slate-50 active:scale-95 transition-all p-4 rounded-[2rem] shadow-xl shadow-slate-200/50 flex flex-col items-center justify-center gap-2 group border border-slate-100",children:[e.jsx("div",{className:"w-12 h-12 bg-blue-100 rounded-2xl flex items-center justify-center text-blue-500 group-hover:scale-110 transition-transform",children:e.jsx(tt,{size:24,strokeWidth:2.5,fill:"currentColor",className:"text-blue-500"})}),e.jsx("span",{className:"font-black text-slate-800 text-[10px] uppercase tracking-wider",children:l.goal})]}),e.jsxs("button",{onClick:()=>ie(!0),className:"bg-white hover:bg-slate-50 active:scale-95 transition-all p-4 rounded-[2rem] shadow-xl shadow-slate-200/50 flex flex-col items-center justify-center gap-2 group border border-slate-100",children:[e.jsx("div",{className:"w-12 h-12 bg-violet-100 rounded-2xl flex items-center justify-center text-violet-500 group-hover:scale-110 transition-transform",children:e.jsx(ot,{size:24,strokeWidth:2.5})}),e.jsx("span",{className:"font-black text-slate-800 text-[10px] uppercase tracking-wider",children:l.achievements})]})]}),e.jsxs("div",{id:"tutorial-piggy-history",className:"mx-6 mb-8 md:mx-0 md:mb-0 bg-white rounded-[2.5rem] p-6 border border-slate-100 shadow-xl shadow-slate-200/50 flex-1 min-h-[220px] relative z-20",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("h3",{className:"font-black text-slate-800 flex items-center gap-3 text-lg",children:[e.jsx("div",{className:"bg-indigo-100 p-2 rounded-xl text-indigo-500",children:e.jsx(le,{size:20})})," ",l.history]}),e.jsx("div",{className:"flex gap-2",children:["week","month","all"].map(t=>e.jsx("button",{onClick:()=>ne(t),className:`px-2 py-1 text-[10px] font-bold rounded-lg transition-all ${b===t?"bg-indigo-500 text-white":"bg-slate-100 text-slate-600 hover:bg-slate-200"}`,children:t==="week"?"Woche":t==="month"?"Monat":"Alles"},t))})]}),e.jsx("div",{style:{width:"100%",height:140},children:$.length>0?e.jsx(te,{width:"100%",height:"100%",children:e.jsxs(ke,{data:$,children:[e.jsx("defs",{children:e.jsxs("linearGradient",{id:"colorValue",x1:"0",y1:"0",x2:"0",y2:"1",children:[e.jsx("stop",{offset:"5%",stopColor:"#6366f1",stopOpacity:.2}),e.jsx("stop",{offset:"95%",stopColor:"#6366f1",stopOpacity:0})]})}),e.jsx(Se,{dataKey:"day",axisLine:!1,tickLine:!1,tick:{fill:"#94a3b8",fontSize:10,fontWeight:"bold"},dy:10}),e.jsx(Ce,{hide:!0,domain:[0,"auto"]}),e.jsx(se,{contentStyle:{backgroundColor:"#fff",borderRadius:"16px",border:"1px solid #e2e8f0",color:"#1e293b"},itemStyle:{color:"#6366f1",fontWeight:"bold"},formatter:t=>[`€${t.toFixed(2)}`,"Betrag"]}),e.jsx(ze,{type:"monotone",dataKey:"amount",stroke:"#6366f1",strokeWidth:4,fillOpacity:1,fill:"url(#colorValue)"})]})}):e.jsx("div",{className:"flex items-center justify-center h-full text-slate-400",children:e.jsx("p",{children:"Keine Transaktionen vorhanden"})})})]})]}),e.jsxs("div",{className:"w-full px-6 md:px-0 pb-40 md:pb-0 md:w-1/2 md:flex md:flex-col md:gap-6 md:overflow-y-auto md:no-scrollbar relative z-20",children:[e.jsxs("div",{id:"tutorial-piggy-goals",className:"mb-6 md:mb-0",children:[e.jsxs("h3",{className:"font-black text-slate-800 mb-5 ml-4 text-xl flex items-center gap-2",children:[e.jsx(Ee,{size:20,className:"text-emerald-500"})," ",l.goals]}),F.length>0?e.jsx("div",{className:"space-y-4",children:F.map(t=>{const a=t.currentAmount,r=Math.min(100,a/t.targetAmount*100),o=r>=99.9;return e.jsxs("div",{onClick:()=>L(t),className:`p-5 rounded-[2rem] border transition-transform cursor-pointer group hover:shadow-xl relative overflow-hidden ${o?"bg-emerald-500 border-emerald-500 shadow-xl shadow-emerald-200 text-white":"bg-white border-slate-100 shadow-lg shadow-slate-100 active:scale-95"}`,children:[e.jsxs("div",{className:"flex justify-between items-center mb-3 relative z-10",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:`w-10 h-10 rounded-full flex items-center justify-center group-hover:scale-110 transition-transform ${o?"bg-white/20 text-white":"bg-emerald-50 text-emerald-500"}`,children:o?e.jsx(p,{size:20,strokeWidth:4}):e.jsx(dt,{size:18,fill:"currentColor"})}),e.jsxs("div",{children:[e.jsx("h4",{className:`font-black text-lg leading-none ${o?"text-white":"text-slate-800"}`,children:t.title}),o&&e.jsx("div",{className:"text-emerald-100 text-[10px] font-bold uppercase mt-1",children:"Wunsch erfüllt!"})]})]}),e.jsxs("span",{className:`font-black px-3 py-1 rounded-xl text-sm ${o?"bg-white text-emerald-600":"text-emerald-500 bg-emerald-50"}`,children:[t.targetAmount.toFixed(2).replace(".",",")," €"]})]}),!o&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"h-3 bg-slate-100 rounded-full overflow-hidden",children:e.jsx("div",{className:"h-full bg-emerald-400 rounded-full transition-all duration-500",style:{width:`${r}%`}})}),e.jsxs("p",{className:"text-right text-xs font-bold mt-2 flex justify-between text-slate-400",children:[e.jsxs("span",{className:"text-emerald-500",children:[a.toFixed(2).replace(".",",")," € gespart"]}),e.jsxs("span",{children:["Noch ",(t.targetAmount-a).toFixed(2).replace(".",",")," €"]})]})]}),o&&e.jsx("div",{className:"mt-4 relative z-20",children:e.jsxs("button",{onClick:d=>{d.stopPropagation(),E(t)},className:"w-full bg-white text-emerald-600 font-black py-3 rounded-xl shadow-lg flex items-center justify-center gap-2 hover:bg-emerald-50 active:scale-95",children:[e.jsx(Fe,{size:20})," Kaufen & Einlösen"]})})]},t.id)})}):e.jsx("div",{className:"bg-white rounded-[2rem] p-10 text-center border-2 border-dashed border-slate-200",children:e.jsx("p",{className:"text-slate-800 font-bold text-lg mb-1",children:l.noGoals})})]}),J.length>0&&e.jsxs("div",{className:"mb-6 md:mb-0 bg-white rounded-[2rem] p-6 border border-slate-100 shadow-xl shadow-slate-200/50",children:[e.jsxs("h3",{className:"font-black text-slate-800 mb-5 text-lg flex items-center gap-2",children:[e.jsx(De,{size:20,className:"text-purple-500"})," Zielverteilung"]}),e.jsx("div",{style:{width:"100%",height:200},children:e.jsx(te,{width:"100%",height:"100%",children:e.jsxs(De,{children:[e.jsx(it,{data:J,cx:"50%",cy:"50%",labelLine:!1,label:({name:t,value:a})=>`${t}: €${a.toFixed(2)}`,outerRadius:60,fill:"#8884d8",dataKey:"value",children:J.map((t,a)=>e.jsx(rt,{fill:ge[a%ge.length]},`cell-${a}`))}),e.jsx(se,{formatter:t=>`€${t.toFixed(2)}`})]})})})]}),e.jsxs("div",{id:"tutorial-piggy-transactions",className:"mb-6 md:mb-0 md:flex-1",children:[e.jsx("h3",{className:"font-black text-slate-800 mb-5 ml-4 text-xl",children:l.transactions}),e.jsx("div",{className:"space-y-4",children:((ve=s.transactions)==null?void 0:ve.length)>0?s.transactions.map(t=>e.jsxs("div",{className:"bg-white p-5 rounded-[2rem] flex items-center justify-between border border-slate-100 shadow-lg shadow-slate-100",children:[e.jsxs("div",{className:"flex items-center gap-4 min-w-0",children:[e.jsx("div",{className:`w-14 h-14 rounded-2xl flex items-center justify-center shrink-0 ${t.type==="deposit"?"bg-emerald-100 text-emerald-500":"bg-red-100 text-red-500"}`,children:t.type==="deposit"?e.jsx(Ae,{size:28}):e.jsx(M,{size:28})}),e.jsxs("div",{className:"min-w-0",children:[e.jsx("h4",{className:"font-black text-slate-800 text-base line-clamp-2 leading-tight",children:t.title?t.title.length>50?t.title.slice(0,50)+"...":t.title:t.type==="deposit"?t.deposit:t.withdrawal}),e.jsx("p",{className:"text-slate-400 text-xs font-bold",children:t.date})]})]}),e.jsxs("span",{className:`font-black text-xl whitespace-nowrap shrink-0 ml-2 ${t.type==="deposit"?"text-emerald-500":"text-slate-800"}`,children:[t.type==="deposit"?"+":"-","€",Math.abs(t.amount).toLocaleString("de-DE",{minimumFractionDigits:2,maximumFractionDigits:3})]})]},t.id)):e.jsx("div",{className:"text-center py-12 text-slate-400 font-bold bg-white rounded-[2rem] border-2 border-dashed border-slate-200",children:l.noTransactions})})]})]})]}),Ge&&e.jsx(xt,{user:g,piggyBanks:P,onUpdateUser:w,onClose:()=>ie(!1),language:x}),je(),Re&&e.jsx("div",{className:"fixed inset-0 z-[200] flex items-center justify-center bg-black/60 backdrop-blur-sm p-4 animate-in fade-in duration-200",children:e.jsxs("div",{className:"bg-white w-full max-w-sm rounded-[2.5rem] p-8 text-center shadow-2xl border-4 border-white relative overflow-hidden",children:[e.jsx("div",{className:"w-20 h-20 bg-red-50 rounded-full flex items-center justify-center mx-auto mb-6 text-red-500 shadow-xl border-4 border-white",children:e.jsx(Te,{size:36,strokeWidth:2.5})}),e.jsx("h3",{className:"text-2xl font-black text-slate-800 mb-4 leading-tight",children:"Vorsicht! Hard Reset"}),e.jsx("div",{className:"bg-red-50 p-4 rounded-2xl mb-8 text-left border border-red-100",children:e.jsxs("p",{className:"text-sm font-bold text-red-600 leading-relaxed",children:["Dies wird diese Sparbox von deinem Konto trennen.",e.jsx("br",{}),e.jsx("br",{}),"• Alle Wünsche werden gelöscht",e.jsx("br",{}),"• Der gesamte Verlauf wird gelöscht",e.jsx("br",{}),"• Alle Zuschauer werden entfernt",e.jsx("br",{}),e.jsx("br",{}),"Die Sparbox bleibt im System erhalten, ist aber für dich nicht mehr sichtbar."]})}),e.jsxs("div",{className:"flex flex-col gap-3",children:[e.jsx("button",{onClick:()=>{B(!1),C(s.id)},className:"w-full bg-red-500 text-white font-black py-4 rounded-2xl shadow-xl active:scale-95 transition-all text-lg",children:"Alles löschen & trennen"}),e.jsx("button",{onClick:()=>B(!1),className:"w-full bg-slate-100 text-slate-500 font-bold py-4 rounded-2xl active:scale-95 transition-all",children:"Abbrechen"})]})]})}),h&&e.jsx("div",{className:"fixed inset-0 z-[200] flex items-center justify-center bg-black/60 backdrop-blur-sm p-4 animate-in fade-in duration-200",children:e.jsxs("div",{className:"bg-white w-full max-w-sm rounded-[2.5rem] p-8 text-center shadow-2xl border-4 border-white relative overflow-hidden",children:[e.jsx("div",{className:"w-20 h-20 bg-emerald-50 rounded-full flex items-center justify-center mx-auto mb-6 text-emerald-500 shadow-xl border-4 border-white",children:N?e.jsx(p,{size:48,className:"text-emerald-500 scale-125 transition-transform"}):f?e.jsx(ee,{size:36,className:"animate-spin"}):e.jsx(Fe,{size:36,strokeWidth:2.5})}),e.jsx("h3",{className:"text-2xl font-black text-slate-800 mb-4 leading-tight",children:N?"Wunsch erfüllt!":"Wunsch einlösen?"}),!N&&e.jsxs("div",{className:"bg-emerald-50 p-6 rounded-3xl mb-8 border border-emerald-100",children:[e.jsx("p",{className:"text-sm font-bold text-emerald-700 uppercase tracking-widest mb-1",children:"Du kaufst:"}),e.jsx("h4",{className:"text-xl font-black text-emerald-900 mb-4",children:h.title}),e.jsx("div",{className:"flex items-center justify-center gap-2 text-2xl font-black text-emerald-600",children:e.jsxs("span",{children:["-€",h.targetAmount.toFixed(2)]})})]}),N&&e.jsx("p",{className:"text-emerald-600 font-bold mb-8",children:"Das Geld wurde abgezogen und dein Wunsch archiviert!"}),!N&&e.jsxs("div",{className:"flex flex-col gap-3",children:[e.jsxs("button",{onClick:qe,disabled:f,className:"w-full bg-emerald-500 text-white font-black py-4 rounded-2xl shadow-xl active:scale-95 transition-all text-lg flex items-center justify-center gap-2 disabled:opacity-50 disabled:active:scale-100",children:[f?e.jsx(ee,{className:"animate-spin",size:20}):e.jsx(p,{size:20,strokeWidth:3}),f?"Verarbeite...":"Jetzt einlösen"]}),e.jsx("button",{onClick:()=>E(null),disabled:f,className:"w-full bg-slate-100 text-slate-500 font-bold py-4 rounded-2xl active:scale-95 transition-all disabled:opacity-50",children:"Noch warten"})]})]})}),e.jsx("style",{children:`
        @keyframes rainbow {
          0% { background-color: #ef4444; }
          20% { background-color: #f59e0b; }
          40% { background-color: #10b981; }
          60% { background-color: #3b82f6; }
          80% { background-color: #8b5cf6; }
          100% { background-color: #ef4444; }
        }
        .animate-rainbow-bg {
          animation: rainbow 10s infinite linear;
        }
        @keyframes glitter-bg {
          0%, 100% { transform: scale(1); opacity: 0.1; }
          50% { transform: scale(1.1) translate(3px, 3px); opacity: 0.25; }
        }
        .animate-glitter-bg {
          animation: glitter-bg 4s infinite ease-in-out;
        }
      `})]});function je(){return e.jsxs(e.Fragment,{children:[We&&e.jsx("div",{className:"fixed inset-0 z-[130] flex items-end sm:items-center justify-center bg-black/60 backdrop-blur-sm p-4",children:e.jsxs("div",{className:"bg-white rounded-[2.5rem] w-full max-w-md p-8 animate-in slide-in-from-bottom-10 shadow-2xl overflow-y-auto no-scrollbar max-h-[90vh]",children:[e.jsxs("div",{className:"flex justify-between items-center mb-8",children:[e.jsx("h3",{className:"text-2xl font-black text-slate-900",children:l.settingsTitle}),e.jsx("button",{onClick:()=>A(!1),className:"bg-slate-100 p-3 rounded-full",children:e.jsx($e,{size:20,className:"text-slate-400"})})]}),e.jsxs("div",{className:"space-y-8",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-bold text-slate-400 uppercase tracking-widest mb-3",children:l.pigName}),e.jsx("input",{type:"text",value:oe,onChange:t=>_e(t.target.value),className:"w-full bg-slate-50 text-slate-900 font-bold text-xl p-5 rounded-2xl border-2 border-slate-100 focus:border-indigo-500 outline-none"})]}),pe.length>0&&e.jsxs("div",{className:"space-y-3 pt-4 border-t border-slate-100",children:[e.jsx("h4",{className:"text-xs font-black text-slate-400 uppercase tracking-widest mb-2",children:"Aktive Effekte"}),pe.map(t=>{const a=t.icon,r=t.id==="effect_glitter"&&V||t.id==="effect_rainbow"&&U||t.id==="effect_safe_lock"&&H;return e.jsxs("div",{className:"bg-slate-50 p-4 rounded-2xl border-2 border-slate-100 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:`w-10 h-10 bg-white rounded-xl flex items-center justify-center ${t.color} shadow-sm`,children:e.jsx(a,{size:20})}),e.jsx("div",{children:e.jsx("h4",{className:"font-bold text-slate-800 text-sm",children:t.label})})]}),e.jsx("button",{onClick:()=>Ye(t.id),className:`w-14 h-8 rounded-full transition-colors relative flex items-center px-1 ${r?"bg-emerald-500":"bg-slate-300"}`,children:e.jsx("div",{className:`w-6 h-6 bg-white rounded-full shadow-md transition-transform ${r?"translate-x-6":"translate-x-0"}`})})]},t.id)})]}),e.jsxs("div",{className:"pt-4 border-t border-slate-100",children:[e.jsx("button",{onClick:()=>{G({...s,name:oe,glitterEnabled:V,rainbowEnabled:U,safeLockEnabled:H}),A(!1)},className:"w-full bg-slate-900 text-white font-black py-5 rounded-2xl shadow-xl active:scale-95 transition-all mb-3",children:l.save}),e.jsxs("button",{onClick:()=>B(!0),className:"w-full py-5 rounded-2xl border-2 border-red-100 bg-red-50 text-red-500 font-bold flex items-center justify-center gap-3",children:[e.jsx(Te,{size:20})," ",l.delete]})]})]})]})}),Me&&e.jsx("div",{className:"fixed inset-0 z-[130] flex items-end sm:items-center justify-center bg-black/60 backdrop-blur-sm p-4",children:e.jsxs("div",{className:"bg-white rounded-[2.5rem] w-full max-w-md p-8 animate-in slide-in-from-bottom-10 shadow-2xl",children:[e.jsx("div",{className:"flex justify-center mb-4",children:K?e.jsx("div",{className:"w-20 h-20 bg-emerald-100 rounded-full flex items-center justify-center text-emerald-500 animate-in zoom-in duration-300",children:e.jsx(p,{size:40,strokeWidth:3})}):null}),e.jsx("h3",{className:"text-2xl font-black text-slate-900 mb-2 text-center",children:K?l.successTitle:l.payoutTitle}),K?e.jsx("p",{className:"text-center text-slate-500 font-medium",children:"Dein Guthaben wird aktualisiert..."}):e.jsxs(e.Fragment,{children:[e.jsxs("p",{className:"text-slate-500 font-bold mb-6 text-center",children:[l.balanceLabel,": €",s.balance.toFixed(2).replace(".",",")]}),e.jsxs("div",{className:"bg-slate-50 rounded-3xl p-6 mb-2 flex items-center border-2 border-slate-100 focus-within:bg-white focus-within:border-amber-400 transition-all",children:[e.jsx("span",{className:"text-4xl font-bold text-slate-300 mr-4",children:"€"}),e.jsx("input",{type:"text",inputMode:"decimal",value:de,onChange:t=>{ce(t.target.value),v(null)},placeholder:"0,00",className:"bg-transparent text-3xl sm:text-5xl font-black text-slate-900 w-full outline-none placeholder-slate-200",autoFocus:!0})]}),he&&e.jsxs("div",{className:"mb-4 flex items-center gap-2 text-red-500 font-bold text-sm bg-red-50 p-3 rounded-xl",children:[e.jsx(st,{size:16})," ",he]}),e.jsxs("div",{className:"mb-8 mt-2",children:[e.jsx("label",{className:"text-xs font-bold text-slate-400 uppercase ml-2 mb-2 block",children:l.reasonLabel}),e.jsx("input",{type:"text",value:xe,onChange:t=>me(t.target.value),placeholder:"z.B. Eis, Lego...",className:"w-full bg-slate-50 rounded-2xl px-5 py-4 font-bold text-slate-800 outline-none border-2 border-slate-100 focus:border-indigo-400 focus:bg-white transition-all",maxLength:16})]}),e.jsx("button",{onClick:He,disabled:T,className:`w-full text-white font-black text-lg py-5 rounded-2xl shadow-xl active:scale-95 transition-all flex items-center justify-center gap-2 ${T?"bg-slate-300":"bg-amber-400 shadow-amber-200"}`,children:T?e.jsx(ee,{className:"animate-spin"}):l.confirm}),e.jsx("button",{onClick:()=>D(!1),disabled:T,className:"w-full mt-4 py-4 text-slate-400 font-bold disabled:opacity-50",children:l.cancel})]})]})}),Pe&&e.jsx("div",{className:"fixed inset-0 z-[130] flex items-end sm:items-center justify-center bg-black/60 backdrop-blur-sm p-4",children:e.jsxs("div",{className:"bg-white rounded-[2.5rem] w-full max-w-md p-8 animate-in slide-in-from-bottom-10 shadow-2xl",children:[e.jsx("h3",{className:"text-2xl font-black text-slate-900 mb-6",children:c?l.editGoal:l.newGoal}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-bold text-slate-400 uppercase mb-2 block ml-1",children:l.wishLabel}),e.jsx("input",{type:"text",value:X,onChange:t=>q(t.target.value),className:"w-full bg-slate-50 rounded-2xl px-5 py-4 font-black text-slate-800 outline-none border-2 border-slate-100 focus:border-indigo-400 focus:bg-white transition-all",placeholder:"z.B. Playstation, Fahrrad...",maxLength:16})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-bold text-slate-400 uppercase mb-2 block ml-1",children:l.costLabel}),e.jsxs("div",{className:"bg-slate-50 rounded-2xl p-5 flex items-center border-2 border-slate-100 focus-within:bg-white focus-within:border-indigo-400 transition-all",children:[e.jsx("span",{className:"text-3xl font-bold text-slate-300 mr-4",children:"€"}),e.jsx("input",{type:"text",inputMode:"decimal",value:be,onChange:t=>Y(t.target.value),placeholder:"0,00",className:"bg-transparent text-4xl font-black text-slate-900 w-full outline-none"})]})]}),e.jsxs("div",{className:"pt-4 flex flex-col gap-3",children:[e.jsx("button",{onClick:Xe,className:"w-full bg-slate-900 text-white font-black py-5 rounded-2xl shadow-xl active:scale-95 transition-all",children:l.save}),e.jsx("button",{onClick:()=>I(!1),className:"w-full py-2 text-slate-400 font-bold",children:l.cancel})]})]})]})})]})}};export{Nt as PiggyDetailScreen};
//# sourceMappingURL=PiggyDetailScreen-CBdJyCp3.js.map

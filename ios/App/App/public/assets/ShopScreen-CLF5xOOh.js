import{c as $,g as D,r as b,S as O,j as e,v as P,x as U,q as F,d as _,e as A,T as C}from"./index-BdfW5sCM.js";import{C as L}from"./clock-DpY8ed_k.js";import{U as H}from"./user-D7pF3ID6.js";import{P as V}from"./palette-BSSFlvUO.js";/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const B=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],R=$("circle-check",B);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const q=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],W=$("circle",q),Y=(n,f,c,r)=>function(){n>>>=0,f>>>=0,c>>>=0,r>>>=0;var g=(n+f|0)+r|0;return r=r+1|0,n=f^f>>>9,f=c+(c<<3)|0,c=c<<21|c>>>11,c=c+g|0,(g>>>0)/4294967296},ee=({user:n,onUpdateUser:f,language:c})=>{const r=D(c).shop,g=D(c).shopItems||{},[j,G]=b.useState(0),[i,z]=b.useState(!1);if(!n)return null;const S=()=>{const t=new Date,l=new Date(t);l.setDate(l.getDate()+1+j),l.setHours(0,0,0,0);const a=l.getTime()-t.getTime(),o=Math.floor(a%(1e3*60*60*24)/(1e3*60*60)),m=Math.floor(a%(1e3*60*60)/(1e3*60));return`${o}h ${m}m`},[T,I]=b.useState(S()),w=b.useMemo(()=>{const t=new Date;t.setDate(t.getDate()+j);const l=t.getFullYear(),a=String(t.getMonth()+1).padStart(2,"0"),o=String(t.getDate()).padStart(2,"0");return`${l}-${a}-${o}`},[j]),p=n.inventory.includes("item_discount_coupon"),N=b.useMemo(()=>{let t=0,l=0;for(let s=0;s<w.length;s++)t+=w.charCodeAt(s),l+=w.charCodeAt(s)*2;const a=Y(t,l,12345,67890),o=A.slice(4).map((s,x)=>x+4);for(let s=o.length-1;s>0;s--){const x=Math.floor(a()*(s+1));[o[s],o[x]]=[o[x],o[s]]}const m=o.slice(0,4).map(s=>({id:`avatar_${s}`,type:"avatar",value:s,price:50+Math.floor(a()*3)*10})),d=Object.keys(C).filter(s=>s!=="orange"&&s!=="blue");for(let s=d.length-1;s>0;s--){const x=Math.floor(a()*(s+1));[d[s],d[x]]=[d[x],d[s]]}const E=d.slice(0,3).map(s=>({id:`theme_${s}`,type:"theme",value:s,price:100})),u=[...O];for(let s=u.length-1;s>0;s--){const x=Math.floor(a()*(s+1));[u[s],u[x]]=[u[x],u[s]]}const M=u.slice(0,4);return{avatars:m,themes:E,specials:M}},[w]);b.useEffect(()=>{const t=setInterval(()=>I(S()),6e4);return()=>clearInterval(t)},[j]);const v=t=>t.id==="item_discount_coupon"?t.price:p&&i?Math.floor(t.price*.5):t.price,k=t=>{const l=v(t),a=t.id;if(n.coins>=l&&!y(a)){let o=[...n.inventory,a],m=n.streakFreezeUntil;if(a==="item_streak_freeze"){const h=new Date;m=new Date(h.getTime()+1440*60*1e3).toISOString()}p&&i&&a!=="item_discount_coupon"&&(o=o.filter(h=>h!=="item_discount_coupon"),z(!1)),f({...n,coins:n.coins-l,inventory:o,unseenItems:[...n.unseenItems,a],streakFreezeUntil:m})}},y=t=>t==="item_streak_freeze"?n.streakFreezeUntil?new Date(n.streakFreezeUntil)>new Date:!1:n.inventory.includes(t);return e.jsxs("div",{className:"flex-1 flex flex-col bg-slate-50 relative overflow-hidden h-screen",children:[e.jsxs("div",{className:"px-6 pt-12 pb-6 bg-white shadow-sm z-10 sticky top-0 md:px-12 md:pt-10",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4 max-w-5xl mx-auto w-full",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-3xl font-black text-slate-900 tracking-tight flex items-center gap-2",children:[e.jsx(P,{size:32,className:"text-blue-500",strokeWidth:2.5}),r.title]}),e.jsx("div",{className:"flex items-center gap-3 mt-1",children:e.jsxs("div",{className:"inline-flex items-center gap-1.5 bg-slate-100 px-2 py-1 rounded-lg border border-slate-200",children:[e.jsx(L,{size:12,className:"text-slate-400"}),e.jsx("span",{className:"text-xs font-bold text-slate-600 font-mono",children:T})]})})]}),e.jsxs("div",{className:"bg-yellow-400 text-yellow-950 px-4 py-2 rounded-2xl font-black shadow-md flex items-center gap-2",children:[e.jsx("div",{className:"w-5 h-5 rounded-full bg-yellow-100 border-2 border-yellow-950 flex items-center justify-center text-[10px]",children:"€"}),e.jsx("span",{className:"text-xl",children:n.coins})]})]}),p&&e.jsx("div",{className:"max-w-5xl mx-auto w-full",children:e.jsxs("button",{onClick:()=>z(!i),className:`w-full flex items-center justify-between p-4 rounded-2xl border-2 transition-all ${i?"bg-orange-500 border-orange-600 text-white shadow-lg shadow-orange-200":"bg-orange-50 border-orange-100 text-orange-600"}`,children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(U,{size:24,className:i?"text-white":"text-orange-500"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-black text-sm uppercase leading-none",children:r.couponAvailableTitle}),e.jsx("p",{className:`text-[10px] font-bold ${i?"text-orange-100":"text-orange-400"}`,children:i?r.couponAvailableHintOn:r.couponAvailableHintOff})]})]}),i?e.jsx(R,{size:24}):e.jsx(W,{size:24,className:"opacity-30"})]})})]}),e.jsxs("div",{className:"flex-1 overflow-y-auto no-scrollbar p-6 pb-32 max-w-5xl mx-auto w-full",children:[e.jsxs("div",{className:"mb-12",children:[e.jsxs("h2",{className:"text-xl font-black text-slate-800 mb-6 flex items-center gap-2",children:[e.jsx(F,{size:24,className:"text-blue-500"}),r.specials]}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4",children:N.specials.map(t=>{var h,d;const l=v(t),a=y(t.id),o=n.coins>=l,m=i&&t.id!=="item_discount_coupon"&&p;return e.jsxs("div",{className:"bg-white p-4 rounded-[2rem] shadow-lg shadow-slate-200/50 border-2 border-slate-100 flex flex-col items-center text-center relative overflow-hidden group",children:[e.jsx("div",{className:"w-14 h-14 bg-slate-50 rounded-2xl flex items-center justify-center mb-3 shadow-sm group-hover:scale-110 transition-transform duration-500",children:e.jsx(t.icon,{className:t.color,size:24})}),e.jsx("h3",{className:"font-black text-sm text-slate-800 mb-0.5 leading-tight",children:((h=g[t.id])==null?void 0:h.label)||t.label}),e.jsx("p",{className:"text-slate-400 text-[10px] font-bold mb-4 px-1 leading-tight h-8 flex items-center justify-center",children:((d=g[t.id])==null?void 0:d.description)||t.description}),a&&t.id!=="item_streak_freeze"?e.jsxs("button",{disabled:!0,className:"w-full bg-emerald-50 text-emerald-600 font-bold py-3 rounded-xl flex items-center justify-center gap-2 text-xs",children:[e.jsx(_,{size:16})," ",r.owned]}):e.jsxs("button",{onClick:()=>k(t),disabled:!o,className:`w-full font-black py-3 rounded-xl flex flex-col items-center justify-center gap-0 text-xs shadow-md transition-all active:scale-95 ${o?"bg-slate-900 text-white":"bg-slate-100 text-slate-400 cursor-not-allowed"}`,children:[m&&e.jsxs("span",{className:"text-[9px] line-through opacity-50",children:[t.price," €"]}),e.jsx("span",{children:a&&t.id==="item_streak_freeze"?"Erneuern ("+l+")":`${l} ${r.balance}`})]})]},t.id)})})]}),e.jsxs("div",{className:"mb-12",children:[e.jsxs("h2",{className:"text-xl font-black text-slate-800 mb-4 flex items-center gap-2",children:[e.jsx("div",{className:"w-8 h-8 bg-blue-50 text-blue-500 rounded-lg flex items-center justify-center",children:e.jsx(H,{size:18})}),r.sectionAvatars]}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:N.avatars.map(t=>{const l=v(t),a=i&&p;return e.jsxs("div",{className:"bg-white p-4 rounded-[2rem] shadow-xl border border-slate-100 flex flex-col items-center relative overflow-hidden group hover:scale-[1.02] transition-transform",children:[e.jsx("div",{className:"w-24 h-24 rounded-full bg-slate-50 mb-4 border-4 border-white shadow-sm overflow-hidden",children:e.jsx("img",{src:A[t.value],alt:"Avatar",className:"w-full h-full object-cover"})}),y(t.id)?e.jsxs("button",{disabled:!0,className:"w-full bg-emerald-50 text-emerald-600 font-bold py-3 rounded-xl flex items-center justify-center gap-2 text-sm",children:[e.jsx(_,{size:18})," ",r.owned]}):e.jsxs("button",{onClick:()=>k(t),disabled:n.coins<l,className:`w-full font-black py-3 rounded-xl flex flex-col items-center justify-center shadow-lg transition-all active:scale-95 text-sm ${n.coins>=l?"bg-gradient-to-r from-blue-600 to-indigo-600 text-white":"bg-slate-100 text-slate-400 border border-slate-200 cursor-not-allowed"}`,children:[a&&e.jsxs("span",{className:"text-[10px] line-through opacity-50",children:[t.price," €"]}),e.jsxs("span",{children:[l," ",r.balance]})]})]},t.id)})})]}),e.jsxs("div",{className:"mb-8",children:[e.jsxs("h2",{className:"text-xl font-black text-slate-800 mb-4 flex items-center gap-2",children:[e.jsx("div",{className:"w-8 h-8 bg-purple-50 text-purple-500 rounded-lg flex items-center justify-center",children:e.jsx(V,{size:18})}),r.sectionThemes]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:N.themes.map(t=>{const l=v(t),a=i&&p;return e.jsxs("div",{className:"bg-white p-4 rounded-[2rem] shadow-xl border border-slate-100 flex items-center justify-between hover:scale-[1.02] transition-transform",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:`w-16 h-16 rounded-2xl ${C[t.value]} shadow-md border-4 border-white`}),e.jsx("h3",{className:"font-black text-lg text-slate-800 capitalize",children:t.value})]}),e.jsx("div",{className:"w-32",children:y(t.id)?e.jsxs("button",{disabled:!0,className:"w-full bg-emerald-50 text-emerald-600 font-bold py-2 rounded-xl flex items-center justify-center gap-1 text-sm",children:[e.jsx(_,{size:18})," ",r.owned]}):e.jsxs("button",{onClick:()=>k(t),disabled:n.coins<l,className:`w-full font-bold py-2 flex flex-col items-center justify-center rounded-xl text-sm transition-all active:scale-95 ${n.coins>=l?"bg-slate-900 text-white shadow-lg":"bg-slate-100 text-slate-400 cursor-not-allowed"}`,children:[a&&e.jsxs("span",{className:"text-[10px] line-through opacity-50",children:[t.price," €"]}),e.jsxs("span",{children:[l," ",r.balance]})]})})]},t.id)})})]})]})]})};export{ee as ShopScreen};
//# sourceMappingURL=ShopScreen-CLF5xOOh.js.map
